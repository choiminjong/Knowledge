# 웹 시각화 가이드

GraphRAG 검색 결과를 그래프 시각화와 함께 제공하는 웹 서버를 실행합니다.

## 개요

`web/` 폴더는 FastAPI 기반 웹 서버로, Neo4j 그래프 시각화와 AI 검색을 하나의 화면에서 제공합니다.

### 파일 구조

```
web/
├── app.py        # FastAPI 엔트리포인트 + 라우트 (API 엔드포인트)
├── config.py     # 환경변수, 설정값 (모델명, DB 접속정보)
├── rag.py        # LLM, Retriever, 프롬프트 템플릿 초기화
├── parser.py     # 응답 파싱, Cypher 캡처 유틸리티
└── static/
    └── index.html  # 프론트엔드 UI
```

흐름: `config.py` (설정) -> `rag.py` (AI 엔진) -> `app.py` (API) -> `static/index.html` (화면)

## 실행 방법

```bash
# 프로젝트 루트에서 실행
uv run python -m web.app

# 브라우저에서 접속
# http://localhost:8000
```

실행 전 확인사항:
- Neo4j 실행 중
- Ollama 실행 중 (`ollama serve`)
- STEP 1~3 완료 (데이터 적재 + 임베딩 생성)

## 화면 구성

### 좌측 패널

| 요소 | 설명 |
|------|------|
| 모드 토글 | **요약 브리핑** / **기사 목록** 전환 |
| 질문 입력 | 자연어 질문 입력 |
| 답변 개수 (k) | 1 / 3 / 5 / 10개 선택 |
| 검색 버튼 | GraphRAG 검색 실행 |
| 예시 질문 | 클릭하면 자동 입력 |
| 답변 영역 | Markdown 렌더링된 답변 |
| 정보 박스 | 사용된 Retriever, 소요시간, 모드 표시 |
| Cypher 박스 | Text2Cypher 사용 시 실행된 쿼리 표시 |

### 우측 패널

| 요소 | 설명 |
|------|------|
| 그래프 | Neo4j 전체 데이터의 네트워크 시각화 |
| 범례 | 노드 타입별 색상 (Article, Category, Content, Media, Author) |
| 노드 정보 | 노드 클릭 시 상세 속성 패널 |
| 하이라이트 | 검색 결과 관련 노드/엣지 강조 |

## 검색 모드

### 요약 브리핑 모드

여러 기사를 종합하여 주제별 요약을 제공합니다.

```
질문: "트럼프 관련 최신 뉴스"

답변:
## 트럼프 관련 동향 요약
트럼프 대통령은 최근 주요 교역국에 대한 관세 정책을 발표하며...

### 주요 포인트
- 관세 정책 발표
- 한국 방위비 분담금 인상 요구
- ...

### 참고 기사
1. [속보] 트럼프 관세 발표... (2026-02-16)
   URL: https://...
```

### 기사 목록 모드

검색된 기사를 목록으로 나열합니다.

```
질문: "정치 카테고리 최신 뉴스"

답변:
1. [속보] 민주당 44.8%·국민의힘 36.1%...
   - URL: https://...
   - 발행일: 2026-02-16 12:00:10
```

## 그래프 시각화

- 페이지 로드 시 Neo4j의 **전체 데이터**가 그래프로 표시됩니다.
- 검색을 실행하면 관련된 노드와 엣지가 **빨간색으로 강조**되고 카메라가 해당 영역으로 이동합니다.
- 노드를 클릭하면 좌측 하단에 속성 패널이 나타납니다.

### 노드 색상

| 색상 | 노드 타입 |
|------|----------|
| 파란색 | Article |
| 주황색 | Category |
| 초록색 | Content |
| 보라색 | Media |
| 노란색 | Author |

## 다음 단계

API 상세는 [API 레퍼런스](06_API레퍼런스.md)를 참고하세요.
